{% extends "base.html" %}
{% block content %}
<div class="card p-4">
  <h3 class="fw-bold text-primary mb-3">User Management</h3>
  <div class="table-responsive">
    <table class="table table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th>ID</th><th>Username</th><th>Email</th><th>Role</th><th>Status</th><th>Actions</th>
        </tr>
      </thead>
      <tbody>
      {% for u in rows %}
        <tr>
          <td>{{ u.id }}</td>
          <td class="fw-semibold">{{ u.username }}</td>
          <td>{{ u.email }}</td>
          <td>
            <span class="badge {% if u.role == 'admin' %}bg-danger{% else %}bg-secondary{% endif %}">
              {{ u.role|capitalize }}
            </span>
          </td>
          <td>
            {% if u.is_active %}
              <span class="badge bg-success">Active</span>
            {% else %}
              <span class="badge bg-warning text-dark">Inactive</span>
            {% endif %}
          </td>
          <td class="d-flex gap-2">
            <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('admin.toggle_active', user_id=u.id) }}">
              Toggle
            </a>
            {% if u.role != 'admin' %}
              <a class="btn btn-sm btn-outline-primary" href="{{ url_for('admin.make_admin', user_id=u.id) }}">
                Make Admin
              </a>
              <a class="btn btn-sm btn-outline-danger" href="{{ url_for('admin.delete_user', user_id=u.id) }}">
                Delete
              </a>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
